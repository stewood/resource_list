{% extends "base.html" %}
{% load directory_extras %}

{% block title %}Community Resource Directory - Find Help{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8 mx-auto text-center">
                <h1 class="display-4 mb-3">
                    <i class="fas fa-hands-helping me-3"></i>
                    Community Resource Directory
                </h1>
                <p class="lead mb-4">Find help and resources for people in need in London, Kentucky and surrounding areas.</p>
                
                <!-- Stats Cards in Hero -->
                <div class="row g-3 justify-content-center mb-4">
                    <div class="col-md-3">
                        <div class="stats-card">
                            <i class="fas fa-users"></i>
                            <h5>{{ total_resources }}</h5>
                            <p>Total Resources</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stats-card">
                            <i class="fas fa-exclamation-triangle"></i>
                            <h5>{{ emergency_count }}</h5>
                            <p>Emergency Services</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stats-card">
                            <i class="fas fa-clock"></i>
                            <h5>{{ twenty_four_hour_count }}</h5>
                            <p>24-Hour Services</p>
                        </div>
                    </div>
                </div>
                
                <!-- Hero Action Buttons -->
                <div class="row g-3 justify-content-center">
                    <div class="col-md-4">
                        <a href="{% url 'directory:public_resource_list' %}" class="btn btn-primary btn-lg w-100">
                            <i class="fas fa-search me-2"></i>
                            Browse All Resources
                        </a>
                    </div>
                    <div class="col-md-4">
                        <a href="{% url 'directory:public_resource_list' %}?emergency=true" class="btn btn-outline-primary btn-lg w-100">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            Emergency Help
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Mission Statement -->
<div class="mission-statement fade-in-up">
    <h2><i class="fas fa-heart me-3"></i>Compassion Without Judgement, Help Without Condemnation</h2>
    <p>"and if you spend yourselves in behalf of the hungry and satisfy the needs of the oppressed, then your light will rise in the darkness, and your night will become like the noonday." - Isaiah 58:10</p>
</div>

<!-- Search Section -->
<div class="search-section fade-in-up">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <h5 class="text-center mb-4">
                    <i class="fas fa-search me-2"></i>Find the Help You Need
                </h5>
                <form method="get" action="{% url 'directory:public_resource_list' %}">
                    <div class="input-group input-group-lg">
                        <input type="text" class="form-control" name="q" placeholder="Search for resources, services, or locations..." value="{{ search_query }}">
                        <button class="btn btn-primary" type="submit">
                            <i class="fas fa-search"></i> Search
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Quick Access Section -->
<div class="container mb-5">
    <div class="section-header fade-in-up">
        <h2><i class="fas fa-bolt me-3"></i>Quick Access</h2>
    </div>
    <div class="row g-4">
        <div class="col-md-6">
            <a href="{% url 'directory:public_resource_list' %}?emergency=true" class="quick-access-btn emergency">
                <i class="fas fa-exclamation-triangle me-3"></i>
                Emergency Services
            </a>
        </div>
        <div class="col-md-6">
            <a href="{% url 'directory:public_resource_list' %}?24hour=true" class="quick-access-btn success">
                <i class="fas fa-clock me-3"></i>
                24-Hour Services
            </a>
        </div>
        <div class="col-md-6">
            <a href="{% url 'directory:public_resource_list' %}" class="quick-access-btn">
                <i class="fas fa-list me-3"></i>
                All Resources
            </a>
        </div>
        <div class="col-md-6">
            <a href="{% url 'directory:public_resource_list' %}?sort=city" class="quick-access-btn info">
                <i class="fas fa-map-marker-alt me-3"></i>
                Browse by Location
            </a>
        </div>
    </div>
</div>

<!-- Categories Section -->
<div class="container mb-5">
    <div class="section-header fade-in-up">
        <h2><i class="fas fa-th-large me-3"></i>Browse by Category</h2>
    </div>
    <div class="row g-4">
        {% for category in categories %}
        <div class="col-md-6 col-lg-4">
            <div class="category-card">
                <h5>
                    {% if category.name == "Food Assistance" %}
                        <i class="fas fa-utensils me-2"></i>
                    {% elif category.name == "Housing" %}
                        <i class="fas fa-home me-2"></i>
                    {% elif category.name == "Healthcare" %}
                        <i class="fas fa-heartbeat me-2"></i>
                    {% elif category.name == "Mental Health" %}
                        <i class="fas fa-brain me-2"></i>
                    {% elif category.name == "Emergency Services & Public Safety" %}
                        <i class="fas fa-shield-alt me-2"></i>
                    {% elif category.name == "Education" %}
                        <i class="fas fa-graduation-cap me-2"></i>
                    {% elif category.name == "Legal" %}
                        <i class="fas fa-balance-scale me-2"></i>
                    {% elif category.name == "Transportation" %}
                        <i class="fas fa-car me-2"></i>
                    {% elif category.name == "Veterans" %}
                        <i class="fas fa-medal me-2"></i>
                    {% elif category.name == "Child Care" %}
                        <i class="fas fa-baby me-2"></i>
                    {% elif category.name == "Churches" %}
                        <i class="fas fa-church me-2"></i>
                    {% elif category.name == "Hotlines" %}
                        <i class="fas fa-phone me-2"></i>
                    {% elif category.name == "Community & Social Services" %}
                        <i class="fas fa-hands-helping me-2"></i>
                    {% elif category.name == "Government & Administrative Services" %}
                        <i class="fas fa-landmark me-2"></i>
                    {% elif category.name == "Mental Health & Healthcare Services" %}
                        <i class="fas fa-user-md me-2"></i>
                    {% elif category.name == "Animal Care" %}
                        <i class="fas fa-paw me-2"></i>
                    {% elif category.name == "Medical" %}
                        <i class="fas fa-stethoscope me-2"></i>
                    {% elif category.name == "Other" %}
                        <i class="fas fa-ellipsis-h me-2"></i>
                    {% else %}
                        <i class="fas fa-tag me-2"></i>
                    {% endif %}
                    {{ category.name }}
                </h5>
                <p>{{ category.description|truncatewords:15 }}</p>
                <div class="d-flex justify-content-between align-items-center">
                    <span class="category-badge">{{ category_counts|get_item:category.id }} resources</span>
                    <a href="{% url 'directory:public_resource_list' %}?category={{ category.id }}" class="btn btn-outline-primary btn-sm">
                        View Resources <i class="fas fa-arrow-right ms-1"></i>
                    </a>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12">
            <div class="card">
                <div class="card-body text-center">
                    <i class="fas fa-info-circle fa-3x text-muted mb-3"></i>
                    <h5 class="card-title">No Categories Available</h5>
                    <p class="card-text text-muted">Categories will be available soon. Please check back later.</p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Help Information Section -->
<div class="container mb-5">
    <div class="help-info-card">
        <div class="card-body text-center">
            <h5 class="card-title">
                <i class="fas fa-question-circle me-2"></i>
                Need Immediate Help?
            </h5>
            <div class="row g-4 mt-3">
                <div class="col-md-6">
                    <div class="p-3">
                        <i class="fas fa-phone-alt fa-2x text-danger mb-3"></i>
                        <h6>Emergency Services</h6>
                        <p class="mb-2">If you're in crisis or need immediate assistance:</p>
                        <strong class="text-danger">Call 911</strong>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="p-3">
                        <i class="fas fa-brain fa-2x text-primary mb-3"></i>
                        <h6>Mental Health Crisis</h6>
                        <p class="mb-2">For mental health crisis support:</p>
                        <strong class="text-primary">Call or Text 988</strong>
                    </div>
                </div>
            </div>
            <hr class="my-4">
            <p class="card-text small text-muted mb-0">
                <i class="fas fa-info-circle me-1"></i>
                This directory is maintained by community partners and updated regularly. 
                Please verify information with individual organizations before visiting.
            </p>
        </div>
    </div>
</div>

<!-- Community Partners Section -->
<div class="container mb-5">
    <div class="section-header fade-in-up">
        <h2><i class="fas fa-handshake me-3"></i>Community Partners</h2>
    </div>
    <div class="row g-4">
        <div class="col-md-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <i class="fas fa-church fa-3x text-primary mb-3"></i>
                    <h5 class="card-title">Faith-Based Organizations</h5>
                    <p class="card-text">Local churches and religious organizations providing support and services.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <i class="fas fa-hands-helping fa-3x text-success mb-3"></i>
                    <h5 class="card-title">Non-Profit Organizations</h5>
                    <p class="card-text">Dedicated non-profits working to serve our community's most vulnerable.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <i class="fas fa-landmark fa-3x text-info mb-3"></i>
                    <h5 class="card-title">Government Services</h5>
                    <p class="card-text">Local, state, and federal programs designed to provide assistance.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Additional custom styles for enhanced visual appeal */
    .hero-section {
        position: relative;
        overflow: hidden;
    }
    
    .hero-section::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="compassion-dots" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1" fill="%23ffffff" opacity="0.1"/></pattern></defs><rect width="100%" height="100%" fill="url(%23compassion-dots)"/></svg>');
        pointer-events: none;
    }
    
    .stats-card {
        backdrop-filter: blur(10px);
        background: rgba(255, 255, 255, 0.1) !important;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .category-card {
        position: relative;
        overflow: hidden;
    }
    
    .category-card::after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        width: 0;
        height: 0;
        border-style: solid;
        border-width: 0 30px 30px 0;
        border-color: transparent var(--isaiah-accent) transparent transparent;
        opacity: 0;
        transition: var(--isaiah-transition);
    }
    
    .category-card:hover::after {
        opacity: 1;
    }
    
    /* Enhanced animations */
    .fade-in-up {
        opacity: 0;
        transform: translateY(30px);
        animation: fadeInUp 0.8s ease-out forwards;
    }
    
    .fade-in-up:nth-child(2) { animation-delay: 0.1s; }
    .fade-in-up:nth-child(3) { animation-delay: 0.2s; }
    .fade-in-up:nth-child(4) { animation-delay: 0.3s; }
    
    /* Responsive improvements */
    @media (max-width: 768px) {
        .hero-section {
            padding: 2rem 0;
        }
        
        .hero-section h1 {
            font-size: 2rem;
        }
        
        .stats-card {
            margin-bottom: 1rem;
        }
        
        .quick-access-btn {
            margin-bottom: 1rem;
        }
    }
    
    /* Dark mode enhancements */
    [data-theme="dark"] .stats-card {
        background: rgba(45, 45, 45, 0.1) !important;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    [data-theme="dark"] .category-card::after {
        border-color: transparent var(--isaiah-accent) transparent transparent;
    }
</style>
{% endblock %}
